#0.40.0

loop-file=no
msg-module
msg-color
term-osd-bar
keep-open=yes
autofit-larger=50%x50%
cursor-autohide-fs-only
cursor-autohide=500
script-opts=osc-layout=bottombar,osc-seekbarstyle=bar,osc-scalefullscreen=1.25,osc-scalewindowed=1.25,osc-vidscale=no
osc=no
video-output-levels=full
title='${filename}'

screenshot-format=png
screenshot-png-compression=5
screenshot-template='%F (%P) %n'
#screenshot-directory='~/Desktop'
screenshot-directory='~~desktop/'

ytdl-format=bestvideo[height<=?1080][fps<=?30][vcodec!=?vp9][protocol!=http_dash_segments]+bestaudio/best #[protocol!=http_dash_segments][protocol!=rtmp]

cache=auto

ontop
osd-level=1
osd-duration=2500
osd-status-msg='${time-pos} / ${duration}${?percent-pos:ã€€(${percent-pos}%)}\n${?chapter:Chapter: ${chapter}}'

osd-font-size=32
osd-bar-align-y=0
osd-border-size=2
osd-bar-h=2
osd-bar-w=60

sub-ass
sub-use-margins
sub-ass-force-margins

demuxer-mkv-subtitle-preroll
sub-auto=fuzzy
sub-file-paths=ass:srt:sub:subs:subtitles:Rus Subs:rus subs     #linux
#sub-file-paths=ass;srt;sub;subs;subtitles;rus subs             #win
embeddedfonts=yes
sub-fix-timing=no
sub-ass-style-overrides=Kerning=yes
#sub-ass-override=force                                         #ignore style

sub-pos=85
sub-font-size=52
sub-color="#FFFFF080"
sub-border-color="#B05B5B20"
sub-border-size=3.2
sub-shadow-offset=1
sub-shadow-color="#33000000"
sub-spacing=0.5
sub-scale-by-window=yes

slang=ru,rus,en,eng
alang=en,eng,ru,rus

audio-file-paths=Dub:dub:Rus Sound:rus sound:Rus Dub:rus dub    #linux
#audio-file-paths=dub;rus sound;rus dub                         #win
audio-file-auto=fuzzy
audio-pitch-correction=yes
volume-max=200
volume=65

vo=gpu-next
spirv-compiler=auto
hwdec=no

gamma=-4
saturation=20

interpolation=yes
video-sync=display-resample
blend-subtitles=yes

tscale=oversample

#tscale=box
#tscale-window=sphinx
#tscale-radius=0.95
#tscale-clamp=0.0

hr-seek=yes

dither-depth=auto

deband=no
deband-iterations=4
deband-threshold=60
deband-range=16
deband-grain=0
deinterlace=no                                                  #ctrl+d

gpu-api=vulkan

#gpu-context=winvk                                              #win vulkan
#gpu-context=win                                                #win fullscreen gpu artifact fix

#gpu-shader-cache-dir="~~/shaders/_cache"                       #win HLSL to DXBC fix

####
# nq, lq, sq, mq, hq, 
# fsrcnnx, ravu, artcnn, artcnn-hq
# a4k-mq, a4k-hq, hdr, 
# rife-cuda, aj2-lq, aj2-mq, aj2-hq                             #win: https://github.com/hooke007/mpv_PlayKit/releases/tag/20231101

[default]
profile=ravu
####


[hw]
hwdec=auto-copy
#hwdec=nvdec-copy

[nq]
profile=hw
save-position-on-quit
scale=bilinear
cscale=bilinear
dscale=bilinear
interpolation=no

[lq]
profile=hw
save-position-on-quit
scale=spline36
cscale=sinc
cscale-window=blackman
cscale-radius=3
dscale=mitchell
interpolation=no

[sq]
save-position-on-quit
profile=gpu-hq

[mq]
profile=sq
scale=ewa_lanczos
scale-blur=0.981251
scale-antiring=0.6
cscale=ewa_lanczos
cscale-blur=0.981251
cscale-antiring=0.6
cscale-radius=10
dscale=mitchell
dscale-antiring=0.6

[hq]
profile=mq
glsl-shader="~~/shaders/SSimSuperRes.glsl"                      #! https://gist.github.com/igv/2364ffa6e81540f29cb7ab4c9bc05b6b

[fsrcnnx]
profile=sq
glsl-shader="~~/shaders/FSRCNNX_x2_16-0-4-1.glsl"               #! https://github.com/igv/FSRCNN-TensorFlow/releases
scale=ewa_lanczos
glsl-shader="~~/shaders/SSimDownscaler.glsl"                    #! https://gist.github.com/igv/36508af3ffc84410fe39761d6969be10
dscale=gaussian
glsl-shader="~~/shaders/KrigBilateral.glsl"                     #! https://gist.github.com/igv/a015fc885d5c22e6891820ad89555637
cscale=mitchell
linear-downscaling=no

[ravu]
profile=sq
glsl-shader="~~/shaders/ravu-zoom-ar-r3-yuv.hook"               #! https://github.com/bjin/mpv-prescalers/tree/master
no-scaler-resizes-only

[artcnn]
profile=sq
glsl-shader="~~/shaders/ArtCNN_C4F16_DS.glsl"                   #! https://github.com/Artoriuz/ArtCNN

[artcnn-hq]
profile=sq
glsl-shader="~~/shaders/ArtCNN_C4F32_DS.glsl"                   #! https://github.com/Artoriuz/ArtCNN

[a4k]
profile=sq
scale=ewa_lanczos
scale-blur=0.981251
#glsl-shader="~~/shaders/SSimDownscaler.glsl"                   #! https://gist.github.com/igv/36508af3ffc84410fe39761d6969be10
dscale=gaussian
glsl-shader="~~/shaders/KrigBilateral.glsl"                     #! https://gist.github.com/igv/a015fc885d5c22e6891820ad89555637
cscale=mitchell
linear-downscaling=no

[a4k-mq]
profile=a4k                                                     #! https://github.com/bloc97/Anime4K/releases
glsl-shader="~~/shaders/Anime4K_Clamp_Highlights.glsl"
glsl-shader="~~/shaders/Anime4K_Restore_CNN_Soft_M.glsl"
glsl-shader="~~/shaders/Anime4K_Upscale_CNN_x2_M.glsl"
glsl-shader="~~/shaders/Anime4K_AutoDownscalePre_x2.glsl"
glsl-shader="~~/shaders/Anime4K_AutoDownscalePre_x4.glsl"
glsl-shader="~~/shaders/Anime4K_Upscale_CNN_x2_S.glsl"

[a4k-hq]
profile=a4k                                                     #! https://github.com/bloc97/Anime4K/releases
glsl-shader="~~/shaders/Anime4K_Clamp_Highlights.glsl"
glsl-shader="~~/shaders/Anime4K_Restore_CNN_Soft_VL.glsl"
glsl-shader="~~/shaders/Anime4K_Upscale_CNN_x2_VL.glsl"
glsl-shader="~~/shaders/Anime4K_AutoDownscalePre_x2.glsl"
glsl-shader="~~/shaders/Anime4K_AutoDownscalePre_x4.glsl"
glsl-shader="~~/shaders/Anime4K_Upscale_CNN_x2_M.glsl"


[hdr]
profile=hq
deband=no
save-position-on-quit=no
hwdec=no
target-colorspace-hint=yes
fs=yes


#! (win: mpv root, rm portable_config) https://github.com/hooke007/mpv_PlayKit/releases/tag/20231101
#! require: https://github.com/hooke007/mpv_PlayKit/releases/download/20231101/mpv-lazy-20231101-noBin.7z
#! require: https://github.com/hooke007/mpv_PlayKit/releases/download/20231101/mpv-lazy-20231101-vsMega.7z
[ext-commons]
save-position-on-quit=no
glsl-shaders-clr
profile=mq
profile=hw

[disable-video-filters]
vf=""

[rife-cuda]
profile=ext-commons
vf=vapoursynth="~~/vs/rife_cuda.vpy"

[aj2-lq]
profile=ext-commons
vf=vapoursynth="~~/vs/aj2-lq.vpy"

[aj2-mq]
profile=ext-commons
vf=vapoursynth="~~/vs/aj2-mq.vpy"

[aj2-hq]
profile=ext-commons
vf=vapoursynth="~~/vs/aj2-hq.vpy"


[protocol.https]
profile=hq
script-opts=ytdl_hook-ytdl_path=yt-dlp
cache=yes
user-agent='Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.7444.175 Safari/537.36'

[protocol.http]
profile=protocol.https

[extension.ts]
#profile-cond=p["file-format"]=="mpegts"
glsl-shaders-clr
gpu-api=auto

[extension.m3u8]
profile=https
demuxer-lavf-o=protocol_whitelist=[file,http,https,tls,rtp,tcp,udp,crypto,httpproxy]

[extension.gif]
cache=no
no-pause
loop-file=yes
